<!DOCTYPE html>
<html>
    <head>
        <title>Підбір листів</title>
        <script>
            function calculateQtySheetsByArea() {
                // Парсимо данні з інпутів в body
                var gateWidth = parseInt(document.getElementById("width").value);
                var gateHeight = parseInt(document.getElementById("height").value);
                var totalArea = gateWidth * gateHeight;

                // Стандартні розміри листів металу
                var standardSizes = [
                    { length: 2500, width: 1250, area: 2500*1250, size: '2500x1250' },
                    { length: 2000, width: 1000, area: 2000*1000, size: '2000x1000' }
                    // Додайте інші стандартні розміри, якщо потрібно
                ];
                
                var arrayLen = standardSizes.length
                var sheetsQty = Array(arrayLen).fill(0);
                var sheetsVariants = [];

                var alive = true;
                while (alive){
                    var kitArea = 0;
                    var tempLineEntry = {waste: 0, sheets: {}};
                    for (var i = 0; i < arrayLen; i++){
                        kitArea += sheetsQty[i] * standardSizes[i].area;
                    }
                    var requiredArea = totalArea - kitArea
                    if (requiredArea > 0){
                        sheetsQty[arrayLen-1] = Math.ceil(requiredArea / standardSizes[arrayLen-1].area);
                    } else {
                        sheetsQty[arrayLen-1] = 0;
                    }
                    kitArea += sheetsQty[arrayLen-1] * standardSizes[arrayLen-1].area;

                    var wasteArea = kitArea - totalArea;
                    var wasteAreaPercentage = wasteArea * 100 / totalArea;
                    if (wasteArea > totalArea){
                        alive = false;
                    }

                    tempLineEntry.waste = Math.round(wasteAreaPercentage*10)/10;
                    for (var i=0; i < arrayLen; i++){
                        tempLineEntry.sheets[standardSizes[i].size] = sheetsQty[i];
                    }
                    sheetsVariants.push(tempLineEntry)

                }
    
                  

    
                
                showResults(optimalLayout, cutPieces, pieceCounts);
            }
       
   
            function showResults(layout, cutPieces, pieceCounts) {
                var resultText = "Кількість листів: " + layout.count + "\n\nРозміщення на листах:\nШирина\tДовжина\tКількість\n";
                resultText += layout.width + "\t" + layout.length + "\t" + layout.count;
    
                if (cutPieces.length > 0) {
                    resultText += "\n\nПорізані кусочки:\nШирина\tДовжина\tКількість\n";
                    for (var i = 0; i < cutPieces.length; i++) {
                        var piece = cutPieces[i];
                        var key = piece.width + "x" + piece.height;
                        resultText += piece.width + "\t" + piece.height + "\t" + pieceCounts[key] + "\n";
                    }
                }
    
                document.getElementById("results").textContent = resultText;
            }
        </script>
    </head>
    <body>
        <h1>Підбір варіантів комплектів листів для виготовлення металевих воріт</h1>
        <label for="width">Ширина воріт (мм):</label>
        <input type="text" id="width" name="width"><br>

        <label for="height">Висота воріт (мм):</label>
        <input type="text" id="height" name="height"><br>

        <button onclick="calculateOptimalCuts()">Розрахувати</button>

        <h2>Результати:</h2>
        <pre id="results"></pre>
    </body>
</html>