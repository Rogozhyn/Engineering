<!DOCTYPE html>
<html>
    <head>
        <title>Розрахунок розміщення листів металу та порізка кусочків</title>
        <script>
            function calculateOptimalCuts() {
                var gateWidth = parseInt(document.getElementById("width").value);
                var gateHeight = parseInt(document.getElementById("height").value);
    
                // Стандартні розміри листів металу
                var standardSizes = [
                    { length: 2500, width: 1250 },
                    { length: 2000, width: 1000 }
                    // Додайте інші стандартні розміри, якщо потрібно
                ];
    
                var totalArea = gateWidth * gateHeight;
                var optimalLayout = null;
                var minWaste = Infinity;
    
                // Проходимося по всім комбінаціям стандартних розмірів
                for (var i = 0; i < standardSizes.length; i++) {
                    var size = standardSizes[i];
                    var layout = getLayout(gateWidth, gateHeight, size.length, size.width);
                    var waste = size.length * size.width * layout.unused;
    
                    // Знаходимо найменшу кількість відходів
                    if (waste < minWaste) {
                        minWaste = waste;
                        optimalLayout = layout;
                    }
                }
    
                var cutPieces = getCutPieces(optimalLayout, gateWidth, gateHeight);
                var pieceCounts = countCutPieces(cutPieces);
                showResults(optimalLayout, cutPieces, pieceCounts);
            }
    
            function getLayout(gateWidth, gateHeight, sheetLength, sheetWidth) {
                // Розміри воріт
                var widthCuts = Math.ceil(gateWidth / sheetWidth);
                var heightCuts = Math.ceil(gateHeight / sheetLength);
    
                // Розміщення на аркуші
                var sheetLayout = {
                    width: sheetWidth,
                    length: sheetLength,
                    count: widthCuts * heightCuts,
                    unused: (widthCuts * sheetWidth * heightCuts * sheetLength - gateWidth * gateHeight) / (sheetWidth * sheetLength)
                };
    
                return sheetLayout;
            }
    
            function getCutPieces(layout, gateWidth, gateHeight) {
                var cutPieces = [];
    
                var pieceWidth = gateWidth % layout.width;
                if (pieceWidth > 0) {
                    var pieceHeight = layout.length;
                    cutPieces.push({ width: pieceWidth, height: pieceHeight });
                }
    
                var pieceHeight = gateHeight % layout.length;
                if (pieceHeight > 0) {
                    var pieceWidth = layout.width;
                    cutPieces.push({ width: pieceWidth, height: pieceHeight });
                }
    
                return cutPieces;
            }
    
            function countCutPieces(cutPieces) {
                var pieceCounts = {};
    
                for (var i = 0; i < cutPieces.length; i++) {
                    var piece = cutPieces[i];
                    var key = piece.width + "x" + piece.height;
    
                    if (pieceCounts[key]) {
                        pieceCounts[key]++;
                    } else {
                        pieceCounts[key] = 1;
                    }
                }
    
                return pieceCounts;
            }
    
            function showResults(layout, cutPieces, pieceCounts) {
                var resultText = "Кількість листів: " + layout.count + "\n\nРозміщення на листах:\nШирина\tДовжина\tКількість\n";
                resultText += layout.width + "\t" + layout.length + "\t" + layout.count;
    
                if (cutPieces.length > 0) {
                    resultText += "\n\nПорізані кусочки:\nШирина\tДовжина\tКількість\n";
                    for (var i = 0; i < cutPieces.length; i++) {
                        var piece = cutPieces[i];
                        var key = piece.width + "x" + piece.height;
                        resultText += piece.width + "\t" + piece.height + "\t" + pieceCounts[key] + "\n";
                    }
                }
    
                document.getElementById("results").textContent = resultText;
            }
        </script>
    </head>
    <body>
        <h1>Підбір варіантів комплектів листів для виготовлення металевих воріт</h1>
        <label for="width">Ширина воріт (мм):</label>
        <input type="text" id="width" name="width"><br>

        <label for="height">Висота воріт (мм):</label>
        <input type="text" id="height" name="height"><br>

        <button onclick="calculateOptimalCuts()">Розрахувати</button>

        <h2>Результати:</h2>
        <pre id="results"></pre>
    </body>
</html>